# KBar 3 - 项目概述

KBar 3 是一个为 Adobe After Effects 设计的高度可定制的工具栏扩展。它允许用户创建包含自定义按钮的工具栏，这些按钮可以执行脚本、命令、脚本文件等多种操作，极大地提升了工作效率。

该项目是一个 CEP (Common Extensibility Platform) 扩展，利用现代前端技术构建用户界面，并通过强大的 Node.js 后端与 After Effects 进行深度交互。

## 核心特性

*   **多个工具栏**: 用户可以同时启用最多四个独立的工具栏面板。
*   **可定制的按钮**: 自由添加、删除和重新排列按钮。
*   **丰富的功能类型**: 按钮可以配置为执行以下操作：
    *   运行 JSX/JSXBIN 脚本文件
    *   执行 AE 菜单命令
    *   应用效果
    *   打开项目、合成等
*   **独立的配置界面**: 提供一个专门的配置面板来管理和设置所有工具栏和按钮。
*   **Node.js 集成**: 扩展的前端环境集成了 Node.js，使其具备了更强的文件系统访问、子进程处理和网络通信能力。
*   **导入/导出功能**: 支持将工具栏配置导入或导出为 `.kzip` 格式文件，便于分享和备份。
*   **遥测与错误报告**: 集成 Google Analytics 和 Sentry，用于收集匿名使用数据和错误报告，以持续改进产品。

## 技术架构

*   **前端**: 基于 **React** 框架和 JavaScript。UI 由 React 组件动态渲染。
*   **后端 (宿主)**: 核心逻辑被编译在一个二进制文件 `all.jsxbin` 中，负责与 After Effects 应用程序本身进行通信。
*   **后台服务**: 一个独立的 **Node.js** 进程 (`server.js`)，负责处理文件系统操作、归档、网络请求等系统级任务。
*   **通信**: 前端面板通过 `CSInterface.evalScript` 方法调用 `all.jsxbin` 中封装的函数，并通过 CEP 事件和 Node.js 服务进行更复杂的双向通信。
*   **扩展结构**: 采用多扩展包（Extension Bundle）的模式，将工具栏、配置页面和后台服务拆分为独立的扩展单元，协同工作。