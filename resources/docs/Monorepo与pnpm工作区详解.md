### **概念解析：Monorepo 与 pnpm Workspaces**

为了更好地理解项目改造方案，本文档将详细解释其中两个核心概念：Monorepo（单一代码仓库）和 pnpm Workspaces（pnpm 工作区）。

我们将用一个比喻来贯穿整个解释：**将你的整个 `Eagle2Ae` 项目想象成一个大型的“办公大楼”。**

---

### **1. Monorepo (单一代码仓库)**

**是什么：** Monorepo 就是这栋“办公大楼”本身。

它是一种软件开发策略，意味着**将多个逻辑上独立的项目（比如你的 `apps/web` 应用和 `apps/docs` 网站）全部存放在同一个版本控制仓库（Git 仓库）中**。

*   在我们的方案里，`Eagle2Ae` 这个 Git 仓库就是一个 Monorepo。
*   `apps/web` 和 `apps/docs` 就是大楼里的两个不同“部门”。

**在本项目中的作用：**
1.  **统一版本管理：** 你只需要管理一栋大楼，而不是两栋（或更多）分散在城市各处的建筑。当需要进行一次同时涉及 Web 应用和文档的重大更新时，一次 `git commit` 就能保证所有变更被原子性地提交。这确保了项目各部分之间的版本同步，完美契合了“统一升级”的需求。
2.  **促进代码共享：** 如果未来 `web` 应用和 `docs` 网站需要共用某个工具函数或 UI 组件（例如一个定制的按钮），我们可以轻松地在 Monorepo 中创建一个 `shared-utils` 或 `shared-ui` 的共享包。其他项目可以直接在本地引用它，无需发布到 npm，大大提升了开发效率和代码复用性。
3.  **简化全局配置：** 你可以在大楼的一楼大厅设置一些“公共设施”，比如代码格式化工具（Prettier）、代码检查工具（ESLint）的配置文件。这样，所有部门（子项目）都能自动遵守相同的代码风格和质量标准，提升了整个项目的规范性。

---

### **2. pnpm Workspaces (pnpm 工作区)**

**是什么：** 如果 Monorepo 是“办公大楼”，那么 `pnpm Workspaces` 就是这栋大楼的“**智能物业管理系统**”。

它是一个强大的工具，专门用来管理这栋大楼里的不同部门（子项目），让它们既能独立运作，又能和谐共存，解决了 Monorepo 实践中的各种工程难题。

**在本项目中的作用：**
1.  **高效的依赖管理 (中央仓储系统):**
    *   **问题：** 如果没有物业管理，每个部门 (`web`, `docs`) 都要自己买一套办公用品 (依赖库，如 `vue`, `vitepress`)，并在自己的办公室 (`node_modules`) 里堆得到处都是。这不仅造成了巨大的磁盘空间浪费，还可能导致版本不一致的问题。
    *   **pnpm 的解决方案：** 它会在项目根目录建立一个“**中央内容可寻址仓库**”（通常在 `node_modules/.pnpm` 中），将所有依赖项只下载一次并存储在这里。然后，当某个子项目需要某个依赖时，pnpm 会通过符号链接（symlink）的方式，像一个“快捷方式”一样，将依赖“映射”到该项目的 `node_modules` 文件夹中。
    *   **带来的好处：** 极大节省磁盘空间；安装速度极快；保证了依赖的单一版本和一致性。

2.  **独立的脚本执行 (内部广播系统):**
    *   **问题：** 你想让 `web` 部门开始工作（运行 `dev` 脚本），但不想打扰正在休假的 `docs` 部门。你怎么精确地只通知 `web` 部门？
    *   **pnpm 的解决方案：** 它提供了一个强大的“过滤器”功能，让你能精确地对某个子项目执行命令。语法为 `pnpm --filter <项目名> <指令>`。
        *   `pnpm --filter web dev` 就相当于对内部广播系统说：“请 `web` 部门启动开发服务器。”
        *   `pnpm --filter docs build` 就相当于说：“请 `docs` 部门把所有文档打包归档。”
    *   **带来的好处：** 让你可以在一个统一的仓库里，精确地、独立地控制每一个子项目的开发、构建和测试流程。

### **总结：它们如何协同工作**

在 `Eagle2Ae` 项目中，这两个概念的结合为我们提供了两全其美的解决方案：

*   **Monorepo (大楼)** 提供了统一的物理空间和集中的版本控制，满足了**宏观上**的统一管理需求。
*   **pnpm Workspaces (物业)** 提供了智能的依赖和脚本管理工具，解决了**微观上**的独立开发、运行和部署问题。

通过这个组合，我们完美实现了项目的核心目标：**在统一维护的前提下，实现各部分的独立与解耦。**