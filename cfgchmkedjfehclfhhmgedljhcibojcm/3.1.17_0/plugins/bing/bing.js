class BingPlugin extends SitePlugin{inject(){let e=null,i=0;function r(){$(".imgpt a.iusc, #vs_images a.richImgLnk").each(function(t,e){var i,r=$(this).attr("m")||$(this).attr("data-m");r&&(r=JSON.parse(r),i=$(this).find("img"),r.murl&&i.attr("eagle-src",r.murl),r.t)&&i.attr("eagle-title",r.t)})}{let t=!1;setInterval(()=>{location.href==e&&t||(e=location.href,function(i){var t=document.querySelector('div[role="main"]');if(null==t)return!1;{let e=new MutationObserver(function(t){i(),e.disconnect()});return e.observe(t,{childList:!0,subtree:!0,attributes:!0}),!0}}(()=>{r()})&&(t=!0))},1e3)}{let t=null;window.addEventListener("scroll",()=>{clearTimeout(t),t=setTimeout(()=>{window.document.body.scrollHeight!=i&&(i=window.document.body.scrollHeight,r())},500)})}r()}getMeta(t){var e,i={};return t.closest("a[data-m]")&&((e=JSON.parse(t.closest("a[data-m]").dataset.m)).t&&(i.title=e.t),e.murl)&&(i.src=e.murl),t.closest("a[m]")&&((e=JSON.parse(t.closest("a[m]").getAttribute("m"))).t&&(i.title=e.t),e.murl)&&(i.src=e.murl),i}}(()=>{var t=new BingPlugin;eagle.plugin.register("https://(cn|www).bing.com/images/(.*)",t)})();