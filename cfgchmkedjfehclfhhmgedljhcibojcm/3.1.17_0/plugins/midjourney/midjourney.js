(()=>{class e extends SitePlugin{isValidUrl(){return location.href.includes("midjourney.com")||location.href.includes("nijijourney.com")}getMeta(e){if(!this.isValidUrl())return{};e=e?.closest("div:has(#lightboxPrompt)");if(!e)return{};var r=e?.querySelector("#lightboxPrompt");if(!r)return{};let i=e?.querySelector("a[href*='&user_id=']");var e=(i=i||e?.querySelector("div span.block.truncate"))?.innerText||"",r=r?.querySelector("p")?.innerText||"",t=this.containsNonAsciiChars(r)?25:50,t={title:this.sliceAndCombinePrompt(r,t),annotation:r};return e&&(t.title+=" @"+e),t}containsNonAsciiChars(e){e=e.match(/[\p{L}-]+/gu);return null!==e&&0<e.length}sliceAndCombinePrompt(e,r=50){var i=e.split(/([, .;])/g);let t="";for(let e=0;e<i.length;e++)if(""!==i[e]){if((t+i[e]).length>r)break;t+=i[e]}return t.replace(/[ ,.;]+$/gm,"")}}var r=new e;eagle.plugin.register("nijijourney.com",r),eagle.plugin.register("midjourney.com",r)})();