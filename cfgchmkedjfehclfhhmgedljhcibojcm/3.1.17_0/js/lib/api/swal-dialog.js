class SwalDialog{#dialogWrapperID="eagle-swal-dialog-wrapper";#dialogIframeID="eagle-extension-dialog-window";async open({icon:e="",title:n,description:o="",inputType:a,inputPlaceholder:i,inputValue:t,confirmButtonText:l,cancelButtonText:r,onConfirm:c,onCancel:d,showCancelButton:s}){c=c||async function(){},d=d||async function(){};const g=document.createElement("dialog"),p=(g.setAttribute("eagle-extension",""),document.createElement("iframe"));p.id=this.#dialogIframeID,p.src=eagle.extension.path+"dialog/index.html",g.appendChild(p),document.body.appendChild(g),g.showModal();e={html:`
				<div class="alert">
					<img class="alert-icon" src="${e=e&&eagle.extension.path+e}"></img>
					<h4 class="alert-title">${n}</h4>
					<p class="alert-desc">${o}</p>
				</div>
			`,customClass:"alert-box",showCloseButton:!1,allowOutsideClick:!0,focusConfirm:!0,focusCancel:!1,padding:24,target:"#"+this.#dialogWrapperID,theme:eagle.preference.displayTheme};void 0!==s&&(e.showCancelButton=s),void 0!==l&&(e.showConfirmButton=!0,e.confirmButtonText=l),void 0!==r&&(e.showCancelButton=!0,e.cancelButtonText=r),a&&(e.inputValue=t,e.inputPlaceholder=i,e.input=a),await this.waitIframeReady(p),p.contentWindow.postMessage({channel:"swal-open",options:e},"*");const m=()=>{setTimeout(()=>{p.remove(),g.remove(),window.removeEventListener("message",w)},200)};let w=window.addEventListener("message",async e=>{var n;p&&!1!==e.isTrusted&&e.source===p.contentWindow&&e.data.channel&&("swal-confirm"===(n=e.data.channel)&&("AsyncFunction"===c.constructor.name?await c(e.data.result):c(e.data.result),m()),"swal-cancel"===n)&&("AsyncFunction"===d.constructor.name?await d():d(),m())})}close(){var e=document.getElementById(this.#dialogIframeID);e&&e.remove()}async waitIframeReady(a){return new Promise(n=>{let o=window.addEventListener("message",e=>{"dialog-iframe-ready"===e.data&&e.source===a.contentWindow&&(n(),window.removeEventListener("message",o))})})}showCreateFolderDialog(e){return new Promise(n=>{this.open({title:eagle.i18n.words["collect-window.folder-select-panel.create-dialog.title"],icon:"images/default_icon.png",confirmButtonText:eagle.i18n.words["collect-window.folder-select-panel.create-dialog.confirm"],cancelButtonText:eagle.i18n.words["collect-window.folder-select-panel.create-dialog.cancel"],inputType:"text",inputValue:e,inputPlaceholder:eagle.i18n.words["collect-window.folder-select-panel.create-dialog.placeholder"],onConfirm:e=>{n(e)},onCancel:()=>{n(null)}})})}showMultipleEagleExtensionRunningDialog(){var e=`images/${eagle.preference.displayTheme}/eagle-not-opened.png`;this.open({icon:e,title:eagle.i18n.words["dialog.multiple-extensions-running.title"],description:eagle.i18n.words["dialog.multiple-extensions-running.desc"],confirmButtonText:eagle.i18n.words["dialog.multiple-extensions-running.confirm"],showCancelButton:!1,onConfirm:()=>{eagle.tabs.create({url:"chrome://extensions"})}})}showEagleNotOpenedDialog(){var e=`images/${eagle.preference.displayTheme}/eagle-not-opened.png`;this.open({icon:e,title:eagle.i18n.words["dialog.not-opened-title"],description:eagle.i18n.words["dialog.not-opened-desc"],confirmButtonText:eagle.i18n.words["dialog.not-opened-confirm"],cancelButtonText:eagle.i18n.words["dialog.not-opened-cancel"],onConfirm:()=>{$("#open-eagle-iframe").remove();var e=document.createElement("iframe");e.id="open-eagle-iframe",chrome.runtime.id;e.src=eagle.extension.path+"eagle-opener/index.html",e.name="frame",$(e).css({h:0,w:0,opacity:0}),$("body").append(e),setTimeout(()=>{window.jQuery("#open-eagle-iframe").remove()},2e3)}})}showRuntimeUpdatedDialog(){var e=`images/${eagle.preference.displayTheme}/eagle-not-opened.png`;this.open({icon:e,title:eagle.i18n.words["dialog.updated-title"],description:eagle.i18n.words["dialog.updated-desc"],confirmButtonText:eagle.i18n.words["dialog.updated-confirm"],cancelButtonText:eagle.i18n.words["dialog.updated-cancel"],onConfirm:()=>{location.reload()}})}showPrivacyPolicyDialog(){var e=`images/${eagle.preference.displayTheme}/eagle-not-opened.png`;this.open({icon:e,title:eagle.i18n.words["dialog.privacy-policy-title"],description:eagle.i18n.words["dialog.privacy-policy-desc"],confirmButtonText:eagle.i18n.words["dialog.privacy-policy-confirm"],cancelButtonText:eagle.i18n.words["dialog.privacy-policy-cancel"],onConfirm:()=>{eagle.preference.agreePrivacyPolicy=!0,eagle.preference.save(),location.reload()}})}showBoardSaverKeepWaitingDialog({onConfirm:e,onCancel:n}){var o=`images/${eagle.preference.displayTheme}/eagle-not-opened.png`;this.open({icon:o,title:eagle.i18n.words["dialog.board-saver-keep-waiting.title"],description:eagle.i18n.words["dialog.board-saver-keep-waiting.desc"],confirmButtonText:eagle.i18n.words["dialog.board-saver-keep-waiting.confirm"],cancelButtonText:eagle.i18n.words["dialog.board-saver-keep-waiting.cancel"],showCancelButton:!0,onConfirm:e,onCancel:n})}}eagle.dialog=new SwalDialog;