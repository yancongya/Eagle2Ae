window.angular.module("app").directive("shortcutInput",["$rootScope",d=>({restrict:"A",scope:!0,require:"ngModel",link:function(e,a,r,t){a.bind("keydown",e=>{e.preventDefault();var a=Array.from(document.querySelectorAll(".shortcut-input")).map(e=>e.value),r=e.keyCode,t=String.fromCharCode(r),n=e.shiftKey,c=e.metaKey,s=e.ctrlKey,i=e.altKey;let o=!1,l="";switch(s&&(eagle.env.os.isMac,l+="Ctrl + ",o=!0),c&&eagle.env.os.isMac&&(l+="Command + ",o=!0),n&&(l+="Shift + ",o=!0),i&&(eagle.env.os.isMac,l+="Alt + ",o=!0),r){case 8:if(0==l.length)return l="",e.target.value=l,void e.target.dispatchEvent(new Event("change"));break;case 112:l+="F1",o=!1;break;case 113:l+="F2",o=!1;break;case 114:l+="F3",o=!1;break;case 115:l+="F4",o=!1;break;case 117:l+="F6",o=!1;break;case 118:l+="F7",o=!1;break;case 119:l+="F8",o=!1;break;case 120:l+="F9",o=!1;break;case 121:l+="F10",o=!1;break;case 122:l+="F11",o=!1;break;case 123:l+="F12",o=!1;break;default:o&&(s||c||i||n)&&(187===r&&(l+="=",o=!1),107===r?(l+="Plus",o=!1):189===r||109===r?(l+="-",o=!1):/[^A-Za-z0-9-=+_.]/.test(t.toUpperCase())||(l+=t.toUpperCase(),o=!1))}!l||o||a&&-1!==a.indexOf(l)||(e.target.value=l,e.target.dispatchEvent(new Event("change")),d.preference.updateKeybindings(d.preference.keybindings),d.preference.save())})}})]);