"use strict";window.angular.module("app").controller("ActionController",["$rootScope","$scope",async(l,r)=>{r.disabledOptionTitleKey="",r.disabledOption="0",l.showSaveBoard=!1,r.updateDisabledOptionTitle=async()=>{var e=(await eagle.tabs.getCurrentTab()).url,a=new URL(e).hostname;r.disabledOptionTitleKey="dropdown.enable",r.disabledOption="0",l.preference.urlBlackList.includes(e)?(r.disabledOptionTitleKey="dropdown.disable",r.disabledOption="1"):l.preference.domainBlackList.includes(a)&&(r.disabledOptionTitleKey="dropdown.disable",r.disabledOption="2"),r.$evalAsync()},r.updateDisabledOption=async e=>{var a=(await eagle.tabs.getCurrentTab()).url,t=new URL(a).hostname,s=l.preference.urlBlackList.indexOf(a),i=l.preference.domainBlackList.indexOf(t);"0"===e&&(-1<s&&l.preference.urlBlackList.splice(s,1),-1<i)&&l.preference.domainBlackList.splice(i,1),"1"===e&&(l.preference.urlBlackList.push(a),l.preference.urlBlackList=[...new Set(l.preference.urlBlackList)],-1<i)&&l.preference.domainBlackList.splice(i,1),"2"===e&&(l.preference.domainBlackList.push(t),l.preference.domainBlackList=[...new Set(l.preference.domainBlackList)],-1<s)&&l.preference.urlBlackList.splice(s,1),await r.preference.save(),r.$evalAsync(),r.updateDisabledOptionTitle()},r.updateDisabledOptionTitle(),r.saveBoardClicked=async()=>{var e=await eagle.tabs.getCurrentTab();eagle.tabs.sendMessage(e.id,"save-board",e=>{}),setTimeout(window.close,100)},r.saveUrlClicked=async()=>{var e=await eagle.tabs.getCurrentTab();eagle.tabs.sendMessage(e.id,"save-url",e=>{}),setTimeout(window.close,100)},r.saveImagesClicked=async()=>{var e=await eagle.tabs.getCurrentTab();eagle.tabs.sendMessage(e.id,"batch-save",e=>{}),setTimeout(window.close,100)},r.captureEntireClicked=async()=>{var e=await eagle.tabs.getCurrentTab();eagle.tabs.sendMessage(e.id,"capture-page",e=>{}),setTimeout(window.close,100)},r.captureCropClicked=async()=>{var e=await eagle.tabs.getCurrentTab();eagle.tabs.sendMessage(e.id,"capture-area",e=>{}),setTimeout(window.close,100)},r.captureVisibleClicked=async()=>{var e=await eagle.tabs.getCurrentTab();eagle.tabs.sendMessage(e.id,"capture-visible",e=>{}),setTimeout(window.close,100)};const a=(await eagle.tabs.getCurrentTab()).url;var e=0<(await eagle.boardSaver.getRules()).filter(e=>a.includes(e.urlPattern)).length;l.showSaveBoard=e,l.$evalAsync(),r.$evalAsync()}]);