# Eagle2Ae 用户个人规则

## Rule 01: TRAE 使用偏好

### 1.1 输出语言设置
- **默认语言**: 中文
- **代码注释**: 中文注释，详细说明功能和用途
- **文档语言**: 中文技术文档，英文仅用于代码标识符
- **错误信息**: 中文错误提示，便于理解和调试

### 1.2 交互方式
- **详细解释**: 提供详细的实现思路和步骤说明
- **代码示例**: 每个功能都提供完整的代码示例
- **最佳实践**: 推荐符合项目规范的最佳实践方案
- **问题预防**: 主动提醒可能遇到的问题和解决方案

## Rule 02: 代码生成规范

### 2.1 注释规范
- **函数注释**: 每个函数必须包含详细的中文JSDoc注释
```javascript
/**
 * 建立WebSocket连接
 * @param {string} url - WebSocket服务器地址
 * @param {Object} options - 连接选项
 * @param {number} options.timeout - 连接超时时间（毫秒）
 * @param {number} options.retryCount - 重试次数
 * @returns {Promise<WebSocket>} WebSocket连接实例
 * @throws {Error} 连接失败时抛出错误
 */
function connectWebSocket(url, options = {}) {
    // 实现代码...
}
```

- **行内注释**: 复杂逻辑必须添加行内中文注释
```javascript
// 检查端口是否被占用
if (await isPortInUse(port)) {
    // 如果端口被占用，尝试下一个端口
    port = await findAvailablePort(port + 1);
}
```

- **文件头注释**: 每个文件开头包含文件说明
```javascript
/**
 * WebSocket客户端管理器
 * 负责与Eagle插件的WebSocket通信
 * 
 * @author 开发者姓名
 * @date 2024-01-01
 * @version 1.0.0
 */
```

### 2.2 代码风格
- **缩进**: 使用4个空格缩进
- **分号**: 语句结尾必须使用分号
- **引号**: 字符串优先使用单引号，JSON使用双引号
- **命名**: 使用有意义的中英文混合命名

```javascript
// 推荐的命名方式
const websocketClient = new WebSocketClient();
const fileImportManager = new FileImportManager();
const 用户配置 = getUserConfig(); // 特殊情况下可使用中文
```

### 2.3 错误处理
- **统一错误处理**: 所有异步操作必须包含try-catch
- **错误日志**: 记录详细的错误信息和上下文
- **用户友好**: 向用户显示友好的中文错误提示

```javascript
try {
    // 尝试连接WebSocket
    const connection = await connectWebSocket(url);
    console.log('[INFO] WebSocket连接成功');
} catch (error) {
    // 记录详细错误信息
    console.error('[ERROR] WebSocket连接失败:', error.message);
    // 向用户显示友好提示
    showUserMessage('连接失败，请检查Eagle插件是否正在运行');
}
```

## Rule 03: 文件和目录偏好

### 3.1 文件命名
- **JavaScript文件**: kebab-case，如 `websocket-client.js`
- **配置文件**: 标准名称，如 `package.json`, `manifest.json`
- **文档文件**: kebab-case，如 `api-reference.md`
- **临时文件**: 以 `temp-` 开头，如 `temp-debug.log`

### 3.2 目录结构
- **功能分组**: 按功能模块组织代码
- **层次清晰**: 不超过3层嵌套
- **命名直观**: 目录名称能直接反映功能

### 3.3 文件组织
- **单一职责**: 每个文件只负责一个主要功能
- **适当大小**: 单个文件不超过500行代码
- **依赖清晰**: 文件间依赖关系清晰明确

## Rule 04: 调试和日志偏好

### 4.1 日志输出
- **详细级别**: 开发阶段使用详细的DEBUG级别日志
- **中文描述**: 日志信息使用中文描述，便于理解
- **时间戳**: 所有日志包含精确的时间戳
- **组件标识**: 明确标识日志来源组件

```javascript
// 推荐的日志格式
console.log(`[${new Date().toISOString()}] [DEBUG] [WebSocket客户端] 正在尝试连接到 ${url}`);
console.warn(`[${new Date().toISOString()}] [WARN] [文件管理器] 文件路径可能无效: ${filePath}`);
console.error(`[${new Date().toISOString()}] [ERROR] [通信模块] 连接断开: ${error.message}`);
```

### 4.2 调试工具
- **断点调试**: 优先使用断点调试而非console.log
- **性能监控**: 关键操作添加性能监控代码
- **内存检查**: 定期检查内存使用情况

### 4.3 测试数据
- **模拟数据**: 使用真实但安全的测试数据
- **边界测试**: 包含边界条件和异常情况的测试
- **清理机制**: 测试后自动清理临时数据

## Rule 05: 开发工作流偏好

### 5.1 开发顺序
1. **需求分析**: 详细分析功能需求和技术要求
2. **架构设计**: 设计清晰的模块架构
3. **接口定义**: 明确定义模块间接口
4. **核心实现**: 实现核心功能逻辑
5. **测试验证**: 进行全面的功能测试
6. **文档更新**: 同步更新相关文档

### 5.2 代码审查
- **自我审查**: 提交前进行详细的自我代码审查
- **功能测试**: 确保所有功能正常工作
- **性能检查**: 检查是否存在性能问题
- **安全审查**: 检查是否存在安全隐患

### 5.3 版本管理
- **频繁提交**: 功能完成后及时提交
- **清晰描述**: 提交信息详细描述变更内容
- **分支管理**: 使用功能分支进行开发
- **标签管理**: 重要版本使用标签标记

## Rule 06: 性能和优化偏好

### 6.1 性能优先级
- **用户体验**: 优先保证用户界面响应速度
- **内存效率**: 避免内存泄漏和过度占用
- **网络优化**: 减少不必要的网络请求
- **启动速度**: 优化插件启动和初始化速度

### 6.2 优化策略
- **懒加载**: 非关键功能使用懒加载
- **缓存机制**: 合理使用缓存提高性能
- **异步处理**: 耗时操作使用异步处理
- **资源清理**: 及时清理不再使用的资源

### 6.3 监控指标
- **响应时间**: 监控关键操作的响应时间
- **内存使用**: 监控内存使用情况
- **错误率**: 监控错误发生频率
- **用户反馈**: 收集用户使用反馈

## Rule 07: 安全和隐私偏好

### 7.1 数据保护
- **最小权限**: 只申请必要的系统权限
- **本地处理**: 优先在本地处理数据
- **加密传输**: 敏感数据传输时进行加密
- **及时清理**: 及时清理临时和缓存数据

### 7.2 错误信息
- **用户友好**: 向用户显示友好的错误信息
- **隐私保护**: 错误信息不包含敏感路径或数据
- **调试信息**: 开发模式下提供详细的调试信息
- **日志安全**: 日志文件不包含敏感信息

### 7.3 代码安全
- **输入验证**: 所有用户输入必须进行验证
- **SQL注入**: 避免SQL注入等安全漏洞
- **XSS防护**: 防止跨站脚本攻击
- **权限检查**: 关键操作前检查权限

---

**注意事项**:
1. 这些规则是个人开发偏好，可根据项目需要进行调整
2. 在团队协作时，以项目规范为准
3. 定期回顾和更新这些规则，保持与最佳实践同步
4. 遇到冲突时，优先考虑用户体验和代码质量